{"version":3,"file":"index.js","sources":["../src/fs.ts","../src/utils.ts","../src/git.ts","../src/package-manager.ts","../src/index.ts"],"sourcesContent":["import { promises as fs } from \"node:fs\";\nimport { join } from \"node:path\";\n\nexport const removeEmptyDirectories = async (dir: string): Promise<void> => {\n  const entries = await fs.readdir(dir, { withFileTypes: true });\n  for (const entry of entries) {\n    const fullPath = join(dir, entry.name);\n    if (entry.isDirectory()) {\n      await removeEmptyDirectories(fullPath);\n    }\n  }\n  // After processing subdirs, check if current dir is empty\n  const remaining = await fs.readdir(dir);\n  if (remaining.length === 0) {\n    await fs.rmdir(dir);\n  }\n};\n","import { exec } from \"node:child_process\";\n\nexport const execPromise = (command: string): Promise<void> =>\n  new Promise((resolve, reject) => {\n    exec(command, error => {\n      if (error) {\n        reject(error);\n      } else {\n        resolve();\n      }\n    });\n  });\n","import { execPromise } from \"./utils.js\";\n\nexport const gitClean = async (\n  exclude: string[] = [\".env.local\"],\n): Promise<void> => {\n  const excludeArgs = exclude.map(e => `-e ${e}`).join(\" \");\n  const command = `git clean -Xfd ${excludeArgs}`;\n  return execPromise(command);\n};\n","import { execPromise } from \"./utils.js\";\n\nexport const pnpmInstall = async (): Promise<void> => execPromise(\"pnpm i\");\n","import { removeEmptyDirectories } from \"./fs.js\";\nimport { gitClean } from \"./git.js\";\nimport { pnpmInstall } from \"./package-manager.js\";\n\nexport const gitCleanCommand = async (): Promise<void> => {\n  await Promise.all([removeEmptyDirectories(\".\"), gitClean()]);\n  await pnpmInstall();\n};\n"],"names":["fs","join","exec"],"mappings":";;;;;AAGO,MAAM,yBAAyB,OAAO,QAA+B;AAC1E,QAAM,UAAU,MAAMA,iBAAG,QAAQ,KAAK,EAAE,eAAe,MAAM;AAC7D,aAAW,SAAS,SAAS;AAC3B,UAAM,WAAWC,UAAAA,KAAK,KAAK,MAAM,IAAI;AACrC,QAAI,MAAM,eAAe;AACvB,YAAM,uBAAuB,QAAQ;AAAA,IACvC;AAAA,EACF;AAEA,QAAM,YAAY,MAAMD,iBAAG,QAAQ,GAAG;AACtC,MAAI,UAAU,WAAW,GAAG;AAC1B,UAAMA,QAAAA,SAAG,MAAM,GAAG;AAAA,EACpB;AACF;ACdO,MAAM,cAAc,CAAC,YAC1B,IAAI,QAAQ,CAAC,SAAS,WAAW;AAC/BE,0BAAK,SAAS,CAAA,UAAS;AACrB,QAAI,OAAO;AACT,aAAO,KAAK;AAAA,IACd,OAAO;AACL,cAAA;AAAA,IACF;AAAA,EACF,CAAC;AACH,CAAC;ACTI,MAAM,WAAW,OACtB,UAAoB,CAAC,YAAY,MACf;AAClB,QAAM,cAAc,QAAQ,IAAI,CAAA,MAAK,MAAM,CAAC,EAAE,EAAE,KAAK,GAAG;AACxD,QAAM,UAAU,kBAAkB,WAAW;AAC7C,SAAO,YAAY,OAAO;AAC5B;ACNO,MAAM,cAAc,YAA2B,YAAY,QAAQ;ACEnE,MAAM,kBAAkB,YAA2B;AACxD,QAAM,QAAQ,IAAI,CAAC,uBAAuB,GAAG,GAAG,SAAA,CAAU,CAAC;AAC3D,QAAM,YAAA;AACR;;"}